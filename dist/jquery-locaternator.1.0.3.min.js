/*!
 * A jQuery plugin for specific location handling - v1.0.3 - 2014-07-24
 * https://github.com/davesag/locaternator
 * Copyright (c) 2014 Dave Sag; Licensed MIT
 */

(function(){if("undefined"==typeof jQuery)throw"Expected jQuery to have been loaded before this script.";if("undefined"==typeof async)throw"Expected async to have been loaded before this script."}).call(this),function(){!function(a,b,c){var d,e;return d=function(a,b){var c,d,e,f,g,h,i;return c=6371,e=a.lat*Math.PI/180,f=b.lat*Math.PI/180,h=(b.lat-a.lat)*Math.PI/180,i=(b.lon-a.lon)*Math.PI/180,d=Math.sin(h/2)*Math.sin(h/2)+Math.cos(e)*Math.cos(f)*Math.sin(i/2)*Math.sin(i/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),c*g},e=function(a,b){var c,e,f,g,h,i,j;for(h=[],i=0,j=b.length;j>i;i++)e=b[i],c=d(a,e.coordinate),h.push({location:e,distance:c});return h.sort(function(a,b){return a.distance-b.distance}),f=function(){var a,b,c;for(c=[],a=0,b=h.length;b>a;a++)g=h[a],c.push(g.location);return c}()},a.Locaternator=function(d){var f,g,h,i;return i=a.extend(!0,{},a.Locaternator.options),this.options="object"==typeof d?a.extend(!0,i,d):i,f=function(b){return function(c){var d;d={url:b.options.geoIP.jsonURL,dataType:b.options.geoIP.dataType},a.ajax(d).done(function(a){c(null,a)})}}(this),h=function(b){return function(c){return"string"==typeof b.options.locations||b.options.locations instanceof Array?""===b.options.locations?void c(null,[]):b.options.locations instanceof Array?void c(null,b.options.locations):void a.get(b.options.locations,function(a){c(null,a)}):void c("expected locations option to be a string or array",null)}}(this),g={location:f,locations:h},b.parallel(g,function(b,d){var f,g,h;b?console.error("got error",b):(g={lat:d.location.latitude,lon:d.location.longitude},h=e(g,d.locations),f=h.shift(),a(c).trigger("locaternated",[d.location,h,f]))})},a.Locaternator.options={locations:"",geoIP:{jsonURL:"http://freegeoip.net/json/",dataType:"jsonp"}}}(jQuery,async,document)}.call(this);
//# sourceMappingURL=jquery-locaternator.1.0.3.min.js.map