/*!
 * A jQuery plugin for specific location handling - v1.0.1 - 2014-07-22
 * https://github.com/davesag/locaternator
 * Copyright (c) 2014 Dave Sag; Licensed MIT
 */

(function(){if("undefined"==typeof jQuery)throw"Expected jQuery to have been loaded before this script.";if("undefined"==typeof async)throw"Expected async to have been loaded before this script."}).call(this),function(){!function(a,b,c){var d,e;return e=function(a,b){var c,d,e,f,g,h,i;return c=6371,e=a.lat*Math.PI/180,f=b.lat*Math.PI/180,h=(b.lat-a.lat)*Math.PI/180,i=(b.lon-a.lon)*Math.PI/180,d=Math.sin(h/2)*Math.sin(h/2)+Math.cos(e)*Math.cos(f)*Math.sin(i/2)*Math.sin(i/2),g=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),c*g},d=function(a,b){var c,d,f,g,h,i;for(f={name:f,coordinate:{lat:null,lon:null}},g=[f,1e11],h=0,i=b.length;i>h;h++)d=b[h],c=e(a,d.coordinate),c<g[1]&&(g=[d,c]);return g[0]},a.Locaternator=function(e){var f,g,h,i;return i=a.extend(!0,{},a.Locaternator.options),this.options="object"==typeof e?a.extend(!0,i,e):i,f=function(b){return function(c){var d;d={url:b.options.geoIP.jsonURL,dataType:b.options.geoIP.dataType},a.ajax(d).done(function(a){c(null,a)})}}(this),h=function(b){return function(c){return b.options.locations instanceof String||b.options.locations instanceof Array?""===b.options.locations?void c(null,[]):b.options.locations instanceof Array?void c(null,b.options.locations):void a.get(b.options.locations,function(a){c(null,a)}):void c("expected locations option to be a string or array",null)}}(this),g={location:f,locations:h},b.parallel(g,function(b,e){var f,g;b?console.error("got error",b):(g={lat:e.location.latitude,lon:e.location.longitude},f=d(g,e.locations),a(c).trigger("locaternated",[e.location,e.locations,f]))})},a.Locaternator.options={locations:"",geoIP:{jsonURL:"http://freegeoip.net/json/",dataType:"jsonp"}}}(jQuery,async,document)}.call(this);
//# sourceMappingURL=jquery-locaternator.1.0.1.min.js.map